<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #movie {
            width: 200px;
            height: auto;
        }

        #movies {

            height: 200px;
            width: 206px;
            overflow: scroll;
            border-top: hidden;
           
        }
        #display{
            margin: auto;
        }
    </style>
</head>

<body>

    <input oninput="debounce(main1,1000)" id="movie" type="text" placeholder="Enter Movie Name">

    <div id="movies"></div>

    <div id="display"></div>

</body>

</html>

<script>

    let TimerID;

    let moviesDiv = document.getElementById("movies")

    async function SearchMovies(movie_name) {

        try {

            let res = await fetch(`http://www.omdbapi.com/?s=${movie_name}&apikey=9ca24cf1`);

            let data = await res.json()
            //  console.log(data)
            return data;

        }

        catch (e) {

            console.log("Error Occured", e)
        }


    }

    function appendMovies(movies) {

        console.log(movies)

        if (movies === undefined) {
            return false
        }

        moviesDiv.innerHTML = null;
        movies.forEach(function (movie) {

        
            let posterDiv = document.createElement("div")
           
            posterDiv.style = " box-sizing: border-box;width=90%;border:1px solid red"
            posterDiv.onclick = function () {
                ShowThisMovie(movie)
            }


            let p = document.createElement("img")
            p.src = movie.Poster
            p.style = "width:95%"
           
            posterDiv.append(p)

            moviesDiv.append(posterDiv)
        })

    }


    let parent = document.getElementById("display")

    function ShowThisMovie(m){
        console.log("This movie ",m)

        parent.innerHTML = null;

        let div = document.createElement("div")

        let image = document.createElement("img")
        image.src = m.Poster

        let title = document.createElement("p")
        title.textContent = m.Title

        div.append(image,title)
        parent.append(div)

        
    }





    async function main1() {

        let name = document.getElementById("movie").value

        let res = await SearchMovies(name)

        console.log("resSear",res.Search)

        appendMovies(res.Search)

    

    }

    function debounce(func,delay){

        if(TimerID){

            clearInterval(TimerID)
        }

        TimerID = setTimeout(function(){
            func()
        },delay)
    }



</script>